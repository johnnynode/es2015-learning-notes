<script>
  /* 新增代码块 在一个自执行函数中学习，测试 */

  /* 代码块内是封闭的 */
  (function () {
    console.log('test1');
    {
      let a = 10;
      var b = 1;
    }
    console.log(b); // 1 先输入b ，因为下面会报错
    // console.log(a); // ReferenceError 把报错的注释掉，以免影响其他代码的执行。(自己知道就好)

    // 说明在es6的代码块中，是封闭的。
  })();

  /* for 循环计数器测试 */
  // 使用let
  (function () {
    console.log('test2');
    var arr = [1, 2];
    for (let i = 0; i < arr.length; i++) {
    }
    // console.log(i); //  ReferenceError: i is not defined [此处会报错]
  })();
  // 使用var
  (function(){
    var a = [];
    for(var i=0; i < 10; i++){
      a[i] = function(){
        console.log(i);
      }
    }
    // for 循环结束后，执行a[6]() ； 在for循环中，当i=10时，不满足条件，退出程序。
    a[6](); // 发现输出10 ，这 i 始终会变成最后一个
  })();
  // 再次使用let
  (function(){
    var a = []; // 此处用var 声明，不碍事
    for(let i=0; i < 10; i++){
      a[i] = function(){
        console.log(i);
      }
    }
    a[6](); // 6
  })();

  /* 不存在变量提升的测试 */
  // 使用var
  (function(){
    console.log('test3');
    console.log(i); // 输出 undefined
    var i=10;
  })();
  // 使用let
  (function(){
    // console.log(i); // Uncaught ReferenceError: i is not defined [经测试，此处报错，注释掉]
    let i=0;
  })();

  /* 块级作用域内声明的变量，不受外界影响 */
  (function(){
    console.log('test4');
    var i = 0;
    {
      let i = 1;
      console.log('inner i ' + i); // 1
    }
    console.log('outer i ' + i); // 0
  })();

  /* 不允许重复声明 */
  (function(){
    console.log('test5');
    let i = 1;
    // let i = 1; // Uncaught SyntaxError: Identifier 'i' has already been declared
    // 重复声明将会报错
  })();
</script>